# Monke Test Environment Variables
# Copy this file to env.test and update with your values for testing

# =============================================================================
# AIRWEAVE BACKEND CONFIGURATION
# =============================================================================

# Backend API endpoint for testing
AIRWEAVE_API_URL=http://localhost:8001

# Database Configuration (should match your local Airweave instance)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=airweave
POSTGRES_PASSWORD=airweave1234!
POSTGRES_DB=airweave

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379

# Vector Database Configuration
QDRANT_HOST=localhost
QDRANT_PORT=6333
TEXT2VEC_INFERENCE_URL=http://localhost:9878

# =============================================================================
# AUTHENTICATION PROVIDERS
# =============================================================================

# --- Auth Broker (Composio) ---
# Enable broker-based credential resolution
DM_AUTH_PROVIDER=composio

# Composio API key (required when DM_AUTH_PROVIDER=composio)
# Get this from: https://app.composio.dev/
DM_AUTH_PROVIDER_API_KEY=ak_xxx_replace_with_real_key

# Optional: default connected account/config to use for ALL connectors
# (can be overridden per-connector below)
# DM_AUTH_PROVIDER_ACCOUNT_ID=ca_XXXXXXXXXXXX
# DM_AUTH_PROVIDER_AUTH_CONFIG_ID=ac_XXXXXXXXXXXX

# =============================================================================
# PER-CONNECTOR COMPOSIO OVERRIDES
# =============================================================================
# If set, these take precedence over the global defaults above.

# --- Development & Code Management ---
GITHUB_AUTH_PROVIDER_ACCOUNT_ID=
GITHUB_AUTH_PROVIDER_AUTH_CONFIG_ID=
GITHUB_PERSONAL_ACCESS_TOKEN=
GITHUB_REPO_NAME=

BITBUCKET_AUTH_PROVIDER_ACCOUNT_ID=
BITBUCKET_AUTH_PROVIDER_AUTH_CONFIG_ID=

JIRA_AUTH_PROVIDER_ACCOUNT_ID=
JIRA_AUTH_PROVIDER_AUTH_CONFIG_ID=

CONFLUENCE_AUTH_PROVIDER_ACCOUNT_ID=
CONFLUENCE_AUTH_PROVIDER_AUTH_CONFIG_ID=

LINEAR_AUTH_PROVIDER_ACCOUNT_ID=
LINEAR_AUTH_PROVIDER_AUTH_CONFIG_ID=

# --- Productivity & Project Management ---
ASANA_AUTH_PROVIDER_ACCOUNT_ID=
ASANA_AUTH_PROVIDER_AUTH_CONFIG_ID=

NOTION_AUTH_PROVIDER_ACCOUNT_ID=
NOTION_AUTH_PROVIDER_AUTH_CONFIG_ID=

TODOIST_AUTH_PROVIDER_ACCOUNT_ID=
TODOIST_AUTH_PROVIDER_AUTH_CONFIG_ID=

MONDAY_AUTH_PROVIDER_ACCOUNT_ID=
MONDAY_AUTH_PROVIDER_AUTH_CONFIG_ID=

# --- Google Workspace ---
GMAIL_AUTH_PROVIDER_ACCOUNT_ID=
GMAIL_AUTH_PROVIDER_AUTH_CONFIG_ID=

GOOGLE_CALENDAR_AUTH_PROVIDER_ACCOUNT_ID=
GOOGLE_CALENDAR_AUTH_PROVIDER_AUTH_CONFIG_ID=

GOOGLE_DRIVE_AUTH_PROVIDER_ACCOUNT_ID=
GOOGLE_DRIVE_AUTH_PROVIDER_AUTH_CONFIG_ID=

# --- Microsoft Office ---
OUTLOOK_MAIL_AUTH_PROVIDER_ACCOUNT_ID=
OUTLOOK_MAIL_AUTH_PROVIDER_AUTH_CONFIG_ID=

OUTLOOK_CALENDAR_AUTH_PROVIDER_ACCOUNT_ID=
OUTLOOK_CALENDAR_AUTH_PROVIDER_AUTH_CONFIG_ID=

# --- File Storage ---
DROPBOX_AUTH_PROVIDER_ACCOUNT_ID=
DROPBOX_AUTH_PROVIDER_AUTH_CONFIG_ID=

# --- Business & Sales ---
HUBSPOT_AUTH_PROVIDER_ACCOUNT_ID=
HUBSPOT_AUTH_PROVIDER_AUTH_CONFIG_ID=

STRIPE_AUTH_PROVIDER_ACCOUNT_ID=
STRIPE_AUTH_PROVIDER_AUTH_CONFIG_ID=

# =============================================================================
# DIRECT CREDENTIAL FALLBACKS
# =============================================================================
# Used only if broker is not configured or connector auth_fields are empty

# Bitbucket (config_class auth in Airweave)
BITBUCKET_USERNAME=
BITBUCKET_APP_PASSWORD=

# Stripe (config_class auth in Airweave)
STRIPE_API_KEY=

# =============================================================================
# SOURCE-SPECIFIC EXTRAS
# =============================================================================
# Some sources can use additional config if provided; otherwise they auto-discover

# Atlassian Cloud IDs (auto-discovered if not provided)
# JIRA_CLOUD_ID=
# CONFLUENCE_CLOUD_ID=

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test run configuration
MONKE_MAX_PARALLEL=5
MONKE_VERBOSE=false

# API Keys for AI features (optional for testing)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
MISTRAL_API_KEY=

# =============================================================================
# NOTES
# =============================================================================
# 
# Authentication Resolution Priority:
# 1. auth_fields in test config (highest priority)
# 2. Broker (Composio) using per-connector ACCOUNT_ID/AUTH_CONFIG_ID
# 3. Broker using global default ACCOUNT_ID/AUTH_CONFIG_ID
# 4. Direct fallback credentials (lowest priority)
#
# Setup Instructions:
# 1. Copy this file to 'env.test'
# 2. Configure Composio at https://app.composio.dev/
# 3. Connect your accounts and get the API key
# 4. Update the relevant *_AUTH_PROVIDER_* variables
# 5. For direct auth, update the fallback credential variables
# 6. Ensure your Airweave backend is running at AIRWEAVE_API_URL
#
# Run tests with: ./monke.sh [connector-name]