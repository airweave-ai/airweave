import{aL as h,aM as m,r as f,j as S,a as p,ap as s,aq as i,ar as l}from"./main-BEToz-TC.js";const r={isOpen:!1,currentStep:"source-select",collectionId:null,collectionName:null,selectedSourceShortName:null,selectedSourceName:null,connectionName:"",authMode:null,authFields:{},configFields:{},useCustomOAuth:!1,clientId:"",clientSecret:"",customRedirectUrl:"",selectedAuthProviderId:null,authProviderConfig:{},oauthUrl:null,createdConnectionId:null},N=h()(m((t,n)=>({...r,open:(e,o,c)=>{t(c?{...r,isOpen:!0,currentStep:"source-config",collectionId:e,collectionName:o,selectedSourceShortName:c.shortName,selectedSourceName:c.name,connectionName:`${c.name} Connection`}:{...r,isOpen:!0,currentStep:"source-select",collectionId:e,collectionName:o})},close:()=>{t({isOpen:!1})},reset:()=>{t(r)},setStep:e=>{t({currentStep:e})},goBack:()=>{const{currentStep:e}=n();switch(e){case"source-config":t({currentStep:"source-select"});break;case"oauth-pending":t({currentStep:"source-config"});break}},selectSource:(e,o)=>{t({selectedSourceShortName:e,selectedSourceName:o,connectionName:`${o} Connection`,currentStep:"source-config",authMode:null,authFields:{},configFields:{},useCustomOAuth:!1,clientId:"",clientSecret:"",customRedirectUrl:"",selectedAuthProviderId:null,authProviderConfig:{}})},clearSource:()=>{t({selectedSourceShortName:null,selectedSourceName:null,connectionName:"",authMode:null,authFields:{},configFields:{}})},setConnectionName:e=>{t({connectionName:e})},setAuthMode:e=>{t({authMode:e,authFields:{},useCustomOAuth:!1,clientId:"",clientSecret:"",selectedAuthProviderId:null,authProviderConfig:{}})},setAuthField:(e,o)=>{t(c=>({authFields:{...c.authFields,[e]:o}}))},setAuthFields:e=>{t({authFields:e})},setConfigField:(e,o)=>{t(c=>({configFields:{...c.configFields,[e]:o}}))},setConfigFields:e=>{t({configFields:e})},setUseCustomOAuth:e=>{t({useCustomOAuth:e})},setClientId:e=>{t({clientId:e})},setClientSecret:e=>{t({clientSecret:e})},setCustomRedirectUrl:e=>{t({customRedirectUrl:e})},setSelectedAuthProviderId:e=>{t({selectedAuthProviderId:e,authProviderConfig:{}})},setAuthProviderConfig:e=>{t({authProviderConfig:e})},setOAuthUrl:e=>{t({oauthUrl:e})},setCreatedConnectionId:e=>{t({createdConnectionId:e})},completeWithOAuth:(e,o)=>{t({createdConnectionId:e,oauthUrl:o,currentStep:"oauth-pending"})},completeWithoutOAuth:e=>{t({createdConnectionId:e,currentStep:"success"})}}),{name:"add-source-storage",partialize:t=>({collectionId:t.collectionId,collectionName:t.collectionName,selectedSourceShortName:t.selectedSourceShortName,selectedSourceName:t.selectedSourceName,connectionName:t.connectionName,createdConnectionId:t.createdConnectionId,oauthUrl:t.oauthUrl})})),g=f.forwardRef(({className:t,...n},e)=>S.jsx("label",{ref:e,className:p("text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...n}));g.displayName="Label";async function A(t,n,e=0,o=100,c){const u=new URLSearchParams({skip:e.toString(),limit:o.toString()}),a=await fetch(`${s}/collections?${u}`,{headers:i(t,n)});if(!a.ok){const d=await l(a,"Failed to fetch collections");throw new Error(d)}return a.json()}async function F(t,n,e){const o=await fetch(`${s}/collections/${e}`,{headers:i(t,n)});if(!o.ok){const c=await l(o,"Failed to fetch collection");throw new Error(c)}return o.json()}async function w(t,n,e){const o=await fetch(`${s}/collections`,{method:"POST",headers:i(t,n),body:JSON.stringify(e)});if(!o.ok){const c=await l(o,"Failed to create collection");throw new Error(c)}return o.json()}async function I(t,n,e){const o=await fetch(`${s}/collections/${e}`,{method:"DELETE",headers:i(t,n)});if(!o.ok){const c=await l(o,"Failed to delete collection");throw new Error(c)}return o.json()}export{g as L,F as a,w as c,I as d,A as f,N as u};
