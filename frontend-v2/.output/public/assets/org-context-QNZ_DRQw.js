import{d,aW as y,i as S,r as a,aX as h,x as c,g,j as m,N as x,q as P,l as w}from"./main-BEToz-TC.js";const f=a.createContext(null);function q({children:s}){const{getAccessTokenSilently:p}=d(),t=y({strict:!1}).orgSlug,{data:r=[],isLoading:o,error:l}=S({queryKey:P.organizations.all,queryFn:async()=>{const u=await p();return w(u)},staleTime:1e3*60*5}),n=a.useMemo(()=>!t||r.length===0?null:h(r,t)??null,[t,r]),i=a.useMemo(()=>{if(o||r.length===0)return null;if(!t){const e=c(r);return e?{to:"/$orgSlug",params:{orgSlug:g(e)}}:null}if(!n){const e=c(r);return e?{to:"/$orgSlug",params:{orgSlug:g(e)}}:null}const u=g(n);return t!==u?{to:`/$orgSlug${(typeof window<"u"?window.location.pathname:"").replace(`/${t}`,"")}`,params:{orgSlug:u}}:null},[t,n,r,o]),O=a.useMemo(()=>({organization:n,organizations:r,isLoading:o,error:l,getOrgSlug:g}),[n,r,o,l]);return i?m.jsx(x,{to:i.to,params:i.params,replace:!0}):m.jsx(f.Provider,{value:O,children:s})}function z(){const s=a.useContext(f);if(!s)throw new Error("useOrg must be used within an OrgProvider");return s}export{q as O,z as u};
